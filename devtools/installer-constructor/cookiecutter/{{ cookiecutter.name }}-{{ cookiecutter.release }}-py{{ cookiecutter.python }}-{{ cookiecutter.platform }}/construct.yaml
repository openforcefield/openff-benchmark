name: 2021-bespokefit-workshop

version: "{{ cookiecutter.release }}"

{% if cookiecutter.platform == "linux-64" %}
    {% set platform2 = "Linux-x86_64" %}
{% elif cookiecutter.platform == "osx-64" %}
    {% set platform2 = "MacOSX-x86_64" %}
{% endif %}

installer_filename: 2021-bespokefit-workshop-{{ cookiecutter.release }}-py{{ cookiecutter.python | replace(".", "") }}-{{ platform2 }}.sh

#specs:
#  - conda
#  - notebook
#  - openff-benchmark
#  - python {{ cookiecutter.python }}*
#  - pytest

specs:
  # General deployment stuff (DO NOT DELETE)
  - conda
  - python {{ cookiecutter.python }}*
  - pip
  # From here down, this is copied from https://github.com/openforcefield/2021-bespokefit-workshop/blob/1db55e83adbac6354aea134eb1ed9af9c1571287/env.yml
    # Testing
  - pytest
  - pytest-cov
  - codecov
    ### Core dependencies.
  - pydantic
  - pyyaml
  - tqdm
  - click
  - rdkit =2021.03.5
  - openff-utilities =0.1.1
    # pin as 0.10.0 breaks forcebalance
  - openff-toolkit =0.9.2
    # pin to be compatible with older forcebalance
  - openmm =7.5.1
  - openff-forcefields =2.0.0
  - openff-qcsubmit =0.2.2
    # Optional
  - forcebalance =1.8.1
  - openff-fragmenter =0.1.2
  - xtb-python =20.2
    ### Bespoke dependencies
  - qcengine >=0.19.0
  - qcfractal >=0.15.6
  - chemper
  - basis_set_exchange
  - torsiondrive
  # Jeff made a conda package of this commit just for the workshop
  - openff-bespokefit =2021.09.07
  #- pip:
  #  - -e git+https://github.com/openforcefield/bespoke-fit.git
  
  
  # # QC Stuff
  #- qcfractal =0.15.1
  #- qcengine =0.17.0
  #- gau2grid =2.0.3
  
  # # Storage dependencies
  #- alembic
  #- psycopg2 >=2.7
  #- postgresql
  #- sqlalchemy >=1.3,<1.4

  # # QCPortal dependencies
  #- double-conversion >=3.0.0
  #- h5py
  #- pandas
  #- plotly >=4.0.0
  #- pyarrow >=0.13.0
  #- tqdm

  ## QM calculations
  ##- psi4 =1.4a2.dev1058+670a850
  ##- xtb-python =20.2
  ##- dftd3
  ##- gcp
    
  ## MM calculations
  #- openforcefield =0.8.4
  #- rdkit =2020.09
  #- openforcefields =2.0.0rc.2
  ##- openff-forcefields
  #- openmm =7.4.2
  #- openmmforcefields =0.8.0
  #- conda-forge::libiconv
  #- ambertools =20.4

  ## procedures
  #- geometric

  ## compute backends
  #- dask-jobqueue

  ## submission
  #- qcportal
  #- openff-qcsubmit =0.2.1

  ## analysis
  #- numpy
  #- pint
  #- matplotlib
  #- seaborn
  ##- pip:
  ##    - git+https://github.com/openforcefield/openff-forcefields.git@2.0.0-rc.1


#environment_file: ../../../prod-envs/openff-benchmark-optimization.yaml

# https://github.com/conda/constructor/issues/86
# https://github.com/openturns/otconda/blob/master/construct.yaml.in
post_install: post_install.sh  [unix]

channels: &id1
  - conda-forge
  - defaults
  - j-wags




conda_default_channels: *id1

install_in_dependency_order: true

ignore_duplicate_files: true

#keep_pkgs: false

initialize_by_default: false
